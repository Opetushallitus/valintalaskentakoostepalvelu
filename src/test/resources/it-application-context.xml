<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:mockito="http://www.mockito.org/spring/mockito"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ctx="http://www.springframework.org/schema/context"
	xmlns:beans="http://www.springframework.org/schema/beans" xmlns:jaxws="http://cxf.apache.org/jaxws"
	xmlns:jaxrs-client="http://cxf.apache.org/jaxrs-client" xmlns:jaxrs="http://cxf.apache.org/jaxrs"
	xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util"
	xmlns:http="http://cxf.apache.org/transports/http/configuration"
	xsi:schemaLocation="http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd
           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
           http://camel.apache.org/schema/spring-security http://camel.apache.org/schema/spring-security/camel-spring-security.xsd
           http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
           http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
           http://cxf.apache.org/jaxrs-client http://cxf.apache.org/schemas/jaxrs-client.xsd
           http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd
        http://www.mockito.org/spring/mockito http://www.mockito.org/spring/mockito.xsd">

	<ctx:annotation-config />

  <import resource="classpath:META-INF/cxf/cxf.xml" />
  <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />


  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.mocks"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.erillishaku"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.proxy.resource.erillishaku"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.valintatapajono.resource"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.valintatapajono.service"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.sijoittelu.komponentti"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.viestintapalvelu.komponentti"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.hakemus.komponentti"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.viestintapalvelu.resource"/>
  <ctx:component-scan base-package="fi.vm.sade.valinta.kooste.proxy.resource.valintatulosservice" />
  <mockito:mock id="AuthorityCheckService" class="fi.vm.sade.valinta.kooste.security.AuthorityCheckService" />

  <bean id="koekutsukirjeetImpl"
        class="fi.vm.sade.valinta.kooste.viestintapalvelu.route.impl.KoekutsukirjeetImpl"/>
  <!-- Pistesyotto -->
    <bean id="sijoittelunTulosXlsKomponentti" class="fi.vm.sade.valinta.kooste.valintalaskentatulos.komponentti.SijoittelunTulosExcelKomponentti"/>
  <bean id="PistesyottoResource"
        class="fi.vm.sade.valinta.kooste.pistesyotto.resource.PistesyottoResource" />
  <bean id="PistesyottoTuontiSoteliService"
        class="fi.vm.sade.valinta.kooste.pistesyotto.service.PistesyottoTuontiSoteliService"/>
  <bean id="PistesyottoTuontiService"
        class="fi.vm.sade.valinta.kooste.pistesyotto.service.PistesyottoTuontiService" />
  <bean id="PistesyottoVientiService"
        class="fi.vm.sade.valinta.kooste.pistesyotto.service.PistesyottoVientiService" />
  <bean id="ValintalaskentaExcelResource"
        class="fi.vm.sade.valinta.kooste.valintalaskentatulos.resource.ValintalaskentaExcelResource" />
  <bean id="ValintakoekutsutExcelService"
        class="fi.vm.sade.valinta.kooste.valintalaskentatulos.service.ValintakoekutsutExcelService" />
  <bean id="KoodistoCachedAsyncResource"
        class="fi.vm.sade.valinta.kooste.external.resource.koodisto.KoodistoCachedAsyncResource"/>
  <bean id="OsoitetarratService" class="fi.vm.sade.valinta.kooste.viestintapalvelu.service.OsoitetarratService"/>
  <!--Suorituksen arvosanat-->
  <bean id="SuorituksenArvosanatProxyResource"
        class="fi.vm.sade.valinta.kooste.proxy.resource.suoritukset.OppijanSuorituksetProxyResource"/>

  <bean id="HakemuksetResource"
        class="fi.vm.sade.valinta.kooste.hakemukset.resource.HakemuksetResource"/>


  <beans
    xmlns:mockito="http://www.mockito.org/spring/mockito"
    xsi:schemaLocation="http://www.mockito.org/spring/mockito http://www.mockito.org/spring/mockito.xsd">
    <mockito:mock id="valintatapajononVientiRoute" class="fi.vm.sade.valinta.kooste.valintatapajono.route.ValintatapajonoVientiRoute" />
    <mockito:mock id="jalkiohjauskirjeService" class="fi.vm.sade.valinta.kooste.viestintapalvelu.route.JalkiohjauskirjeService" />
    <mockito:mock id="hyvaksymiskirjeetService" class="fi.vm.sade.valinta.kooste.viestintapalvelu.route.HyvaksymiskirjeetService" />
    <mockito:mock id="authorizer" class="fi.vm.sade.authentication.business.service.Authorizer" />
    <mockito:mock id="applicationResource" class="fi.vm.sade.valinta.kooste.external.resource.haku.ApplicationResource" />
    <mockito:mock id="hakuV1Resource" class="fi.vm.sade.valinta.kooste.external.resource.haku.HakuV1Resource" />
    <mockito:mock id="hakukohdeV1Resource" class="fi.vm.sade.valinta.kooste.external.resource.haku.HakukohdeV1Resource" />
    <mockito:mock id="hakokohdeResource" class="fi.vm.sade.tarjonta.service.resources.HakukohdeResource" />
    <mockito:mock id="komotoResource" class="fi.vm.sade.tarjonta.service.resources.KomotoResource" />
    <mockito:mock id="ohjausparametritAsyncResource" class="fi.vm.sade.valinta.kooste.external.resource.ohjausparametrit.OhjausparametritAsyncResource" />
    <mockito:mock id="viestintapalveluAsyncResource" class="fi.vm.sade.valinta.kooste.external.resource.viestintapalvelu.ViestintapalveluAsyncResource" />
    <mockito:mock id="viestintapalveluResource" class="fi.vm.sade.valinta.kooste.viestintapalvelu.resource.ViestintapalveluResource" />
    <mockito:mock id="organisaatioAsyncResource" class="fi.vm.sade.valinta.kooste.external.resource.organisaatio.OrganisaatioAsyncResource" />
    <mockito:mock id="valintakoeResource" class="fi.vm.sade.valintalaskenta.tulos.resource.ValintakoeResource" />
    <mockito:mock id="sijoitteluResource" class="fi.vm.sade.sijoittelu.tulos.resource.SijoitteluResource" />
    <mockito:mock id="dokumenttiResource" class="fi.vm.sade.valinta.kooste.external.resource.dokumentti.DokumenttiAsyncResource" />
    <mockito:mock id="hakukohdeResource" class="fi.vm.sade.valinta.kooste.external.resource.laskenta.HakukohdeResource" />
    <mockito:mock id="haeHakukohdeNimiTarjonnaltaKomponentti" class="fi.vm.sade.valinta.kooste.tarjonta.komponentti.HaeHakukohdeNimiTarjonnaltaKomponentti" />
    <mockito:mock id="KoodistoAsyncResource" class="fi.vm.sade.valinta.kooste.external.resource.koodisto.KoodistoAsyncResource"/>
    <mockito:mock id="JalkiohjaustulosExcelRoute" class="fi.vm.sade.valinta.kooste.valintalaskentatulos.route.JalkiohjaustulosExcelRoute" />
    <mockito:mock id="SijoittelunTulosExcelRoute" class="fi.vm.sade.valinta.kooste.valintalaskentatulos.route.SijoittelunTulosExcelRoute" />
    <mockito:mock id="ValintalaskentaTulosExcelRoute" class="fi.vm.sade.valinta.kooste.valintalaskentatulos.route.ValintalaskentaTulosExcelRoute" />
    <mockito:mock id="kirjeetHakukohdeCache" class="fi.vm.sade.valinta.kooste.viestintapalvelu.route.impl.KirjeetHakukohdeCache" />
    <!-- Swagger -->
    <!-- Swagger API listing resource -->
    <bean id="swaggerResourceJSON"
          class="com.wordnik.swagger.jaxrs.listing.ApiListingResourceJSON" />

    <!-- Swagger writers -->
    <bean id="resourceWriter"
          class="com.wordnik.swagger.jaxrs.listing.ResourceListingProvider"
          scope="singleton" />
    <bean id="apiWriter"
          class="com.wordnik.swagger.jaxrs.listing.ApiDeclarationProvider"
          scope="singleton" />

    <!-- Swagger configuration -->
    <bean id="swaggerConfig" class="com.wordnik.swagger.jaxrs.config.BeanConfig">
      <property name="resourcePackage" value="fi.vm.sade.valinta.kooste" />
      <property name="version" value="1.0" />
      <property name="filterClass" value="fi.vm.sade.valinta.kooste.swagger.AsyncResponseFilter"/>
      <property name="basePath"
                value="${valintalaskentakoostepalvelu.swagger.basepath}" />

      <property name="title" value="Swagger API documentation" />
      <property name="scan" value="true" />
    </bean>

    <bean id="jaxrsconfig" class="fi.vm.sade.valinta.kooste.JaxrsConfiguration"/>

    <bean id="cors-filter" class="fi.vm.sade.valinta.kooste.filter.CorsResponseFilter"/>
    <jaxrs:server id="koostepalveluResurssit">
      <jaxrs:serviceBeans>
        <ref bean="ErillishakuResource"/>
        <ref bean="ErillishakuProxyResource"/>
        <ref bean="PistesyottoResource"/>
        <ref bean="SuorituksenArvosanatProxyResource"/>
        <ref bean="DokumenttiProsessiResource"/>
        <ref bean="ViestintapalveluAktivointiResource"/>
        <ref bean="ValintalaskentaExcelResource"/>
        <ref bean="HakemuksetResource"/>
      </jaxrs:serviceBeans>
      <jaxrs:providers>
        <ref bean="jsonProvider" />
        <ref bean="cors-filter"/>
        <ref bean="resourceWriter" />
        <ref bean="apiWriter" />
      </jaxrs:providers>
    </jaxrs:server>

      <ctx:mbean-export/>
  </beans>

</beans>
