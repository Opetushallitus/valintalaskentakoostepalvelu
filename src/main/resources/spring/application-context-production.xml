<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ctx="http://www.springframework.org/schema/context"
	   xmlns:beans="http://www.springframework.org/schema/beans" xmlns:jaxws="http://cxf.apache.org/jaxws"
	   xmlns:jaxrs-client="http://cxf.apache.org/jaxrs-client" xmlns:jaxrs="http://cxf.apache.org/jaxrs"
	   xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util"
	   xmlns:http="http://cxf.apache.org/transports/http/configuration"
	   xmlns:task="http://www.springframework.org/schema/task"
	   xsi:schemaLocation="http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd
           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
           http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
           http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
           http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security.xsd
           http://cxf.apache.org/jaxrs-client http://cxf.apache.org/schemas/jaxrs-client.xsd
           http://cxf.apache.org/transports/http/configuration http://cxf.apache.org/schemas/configuration/http-conf.xsd http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd">

	<ctx:mbean-export/>

	<beans  profile="default">

		<bean id="defaultProps"
			  class="org.springframework.beans.factory.config.PropertiesFactoryBean">
			<property name="properties">
				<util:properties local-override="true">
					<prop key="cas_mode">front</prop>
					<prop key="cas_key">valintalaskentakoostepalvelu</prop>
					<prop key="cas_service">${cas.service.valintalaskentakoostepalvelu}</prop>
					<prop key="cas_callback_url">${cas.callback.valintalaskentakoostepalvelu}</prop>
					<prop key="spring_security_default_access">isAuthenticated()</prop>
				</util:properties>
			</property>
		</bean>

<!--
		<import resource="file:///${user.home:''}/oph-configuration/security-context-backend.xml" />
-->

		<http:conduit name="*.http-conduit">
			<!-- AllowChunking="false" Nginx fails without this -->
      <http:client Connection="Keep-Alive" ConnectionTimeout="${valintalaskentakoostepalvelu.global.http.connectionTimeoutMillis:59999}"
                   ReceiveTimeout="${valintalaskentakoostepalvelu.global.http.receiveTimeoutMillis:1799999}" AllowChunking="false" />
		</http:conduit>
	</beans>
</beans>
